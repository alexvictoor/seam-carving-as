parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"k3Ah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.demangle=C,exports.instantiate=B,exports.instantiateStreaming=M,exports.instantiateSync=I;const t=-8,e=-4,r=0,n=1,o=1,i=2,a=4,s=6,u=2048,c=4096,f=16384,l=0,y=4,w=8,b=12,g=12,p=16,_="Operation requires compiling with --exportTable",A="Operation requires compiling with --exportRuntime",h=()=>{throw Error(A)},m="undefined"!=typeof BigUint64Array,d=Symbol(),O=192,U=1024,E=new TextDecoder("utf-16le",{fatal:!0});function j(t,r){let n=new Uint32Array(t)[r+e>>>2]>>>1;const o=new Uint16Array(t,r,n);if(n<=O)return String.fromCharCode(...o);try{return E.decode(o)}catch{let t="",e=0;for(;n-e>U;)t+=String.fromCharCode(...o.subarray(e,e+=U));return t+String.fromCharCode(...o.subarray(e))}}function x(t){const e={};function r(t,e){return t?j(t.buffer,e):"<yet unknown>"}const n=t.env=t.env||{};return n.abort=n.abort||function(t,o,i,a){const s=e.memory||n.memory;throw Error(`abort: ${r(s,t)} at ${r(s,o)}:${i}:${a}`)},n.trace=n.trace||function(t,o,...i){const a=e.memory||n.memory;console.log(`trace: ${r(a,t)}${o?" ":""}${i.slice(0,o).join(", ")}`)},n.seed=n.seed||Date.now,t.Math=t.Math||Math,t.Date=t.Date||Date,e}function $(A,d){const O=d.exports,U=O.memory,E=O.table,x=O.__new||h,$=O.__pin||h,S=O.__unpin||h,v=O.__collect||h,B=O.__rtti_base,I=B?t=>t[B>>>2]:h;function M(t){const e=new Uint32Array(U.buffer);if((t>>>=0)>=I(e))throw Error(`invalid id: ${t}`);return e[(B+4>>>2)+(t<<1)+1]}function P(t){const e=function(t){const e=new Uint32Array(U.buffer);if((t>>>=0)>=I(e))throw Error(`invalid id: ${t}`);return e[(B+4>>>2)+(t<<1)]}(t);if(!(e&(o|i|a)))throw Error(`not an array: ${t}, flags=${e}`);return e}function W(t){return 31-Math.clz32(t>>>s&31)}function D(t,e,r){const n=U.buffer;if(r)switch(t){case 2:return new Float32Array(n);case 3:return new Float64Array(n)}else switch(t){case 0:return new(e?Int8Array:Uint8Array)(n);case 1:return new(e?Int16Array:Uint16Array)(n);case 2:return new(e?Int32Array:Uint32Array)(n);case 3:return new(e?BigInt64Array:BigUint64Array)(n)}throw Error(`unsupported align: ${t}`)}function F(r){const n=new Uint32Array(U.buffer),o=P(n[r+t>>>2]),s=W(o);let f=o&a?r:n[r+y>>>2];const l=o&i?n[r+g>>>2]:n[f+e>>>2]>>>s;return D(s,o&u,o&c).subarray(f>>>=s,f+l)}function L(t,e,r){const n=U.buffer,o=new Uint32Array(n);return new t(n,o[r+y>>>2],o[r+w>>>2]>>>e)}function R(t,e,r){A[`__get${e}`]=function(t,e,r){return new t(L(t,e,r))}.bind(null,t,r),A[`__get${e}View`]=L.bind(null,t,r)}return A.__new=x,A.__pin=$,A.__unpin=S,A.__collect=v,A.__newString=function(t){if(null==t)return 0;const e=t.length,r=x(e<<1,n),o=new Uint16Array(U.buffer);for(var i=0,a=r>>>1;i<e;++i)o[a+i]=t.charCodeAt(i);return r},A.__newArrayBuffer=function(t){if(null==t)return 0;const e=new Uint8Array(t),n=x(e.length,r);return new Uint8Array(U.buffer).set(e,n),n},A.__getString=function(e){if(!e)return null;const r=U.buffer;if(new Uint32Array(r)[e+t>>>2]!==n)throw Error(`not a string: ${e}`);return j(r,e)},A.__newArray=function(t,e=0){const n=e,o=P(t),s=W(o),_="number"!=typeof n,A=_?n.length:n,h=x(A<<s,o&a?t:r);let m;if(o&a)m=h;else{$(h);const e=x(o&i?p:b,t);S(h);const r=new Uint32Array(U.buffer);r[e+l>>>2]=h,r[e+y>>>2]=h,r[e+w>>>2]=A<<s,o&i&&(r[e+g>>>2]=A),m=e}if(_){const t=D(s,o&u,o&c),e=h>>>s;if(o&f)for(let r=0;r<A;++r)t[e+r]=n[r];else t.set(n,e)}return m},A.__getArrayView=F,A.__getArray=function(t){const e=F(t),r=e.length,n=new Array(r);for(let o=0;o<r;o++)n[o]=e[o];return n},A.__getArrayBuffer=function(t){const r=U.buffer,n=new Uint32Array(r)[t+e>>>2];return r.slice(t,t+n)},A.__getFunction=function(t){if(!E)throw Error(_);const e=new Uint32Array(U.buffer)[t>>>2];return E.get(e)},[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(t=>{R(t,t.name,31-Math.clz32(t.BYTES_PER_ELEMENT))}),m&&[BigUint64Array,BigInt64Array].forEach(t=>{R(t,t.name.slice(3),3)}),A.__instanceof=function(e,r){const n=new Uint32Array(U.buffer);let o=n[e+t>>>2];if(o<=I(n))do{if(o==r)return!0;o=M(o)}while(o);return!1},A.memory=A.memory||U,A.table=A.table||E,C(O,A)}function S(t){return"undefined"!=typeof Response&&t instanceof Response}function v(t){return t instanceof WebAssembly.Module}async function B(t,e={}){if(S(t=await t))return M(t,e);const r=v(t)?t:await WebAssembly.compile(t),n=x(e),o=await WebAssembly.instantiate(r,e);return{module:r,instance:o,exports:$(n,o)}}function I(t,e={}){const r=v(t)?t:new WebAssembly.Module(t),n=x(e),o=new WebAssembly.Instance(r,e);return{module:r,instance:o,exports:$(n,o)}}async function M(t,e={}){if(!WebAssembly.instantiateStreaming)return B(S(t=await t)?t.arrayBuffer():t,e);const r=x(e),n=await WebAssembly.instantiateStreaming(t,e),o=$(r,n.instance);return{...n,exports:o}}function C(t,e={}){const r=t.__argumentsLength?e=>{t.__argumentsLength.value=e}:t.__setArgumentsLength||t.__setargc||(()=>{});for(let n of Object.keys(t)){const o=t[n];let i=n.split("."),a=e;for(;i.length>1;){let t=i.shift();Object.hasOwn(a,t)||(a[t]={}),a=a[t]}let s=i[0],u=s.indexOf("#");if(u>=0){const e=s.substring(0,u),i=a[e];if(void 0===i||!i.prototype){const t=function(...e){return t.wrap(t.prototype.constructor(0,...e))};t.prototype={valueOf(){return this[d]}},t.wrap=function(e){return Object.create(t.prototype,{[d]:{value:e,writable:!1}})},i&&Object.getOwnPropertyNames(i).forEach(e=>Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))),a[e]=t}if(s=s.substring(u+1),a=a[e].prototype,/^(get|set):/.test(s)){if(!Object.hasOwn(a,s=s.substring(4))){let e=t[n.replace("set:","get:")],r=t[n.replace("get:","set:")];Object.defineProperty(a,s,{get(){return e(this[d])},set(t){r(this[d],t)},enumerable:!0})}}else"constructor"===s?(a[s]=function(...t){return r(t.length),o(...t)}).original=o:(a[s]=function(...t){return r(t.length),o(this[d],...t)}).original=o}else/^(get|set):/.test(s)?Object.hasOwn(a,s=s.substring(4))||Object.defineProperty(a,s,{get:t[n.replace("set:","get:")],set:t[n.replace("get:","set:")],enumerable:!0}):"function"==typeof o&&o!==r?(a[s]=((...t)=>(r(t.length),o(...t)))).original=o:a[s]=o}return e}Object.hasOwn=Object.hasOwn||function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var P={instantiate:B,instantiateSync:I,instantiateStreaming:M,demangle:C};exports.default=P;
},{}],"z7uU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.findVerticalSeam=void 0;var r=new Int8Array(0),e=Math.pow(2,31)-1;function a(a,t,v,o){r.length<o&&(r=new Int8Array(o));var i=t,f=(new Int32Array([e]),new Int32Array(t+2));f[0]=e,f[t+1]=e,f.set(a.slice(0,t),1);var s=new Int32Array(t+2);s[0]=e,s[t+1]=e;for(var c=1;c<v;c++){for(var w=1;w<=t;w++,i++)n(w,i,s,f,a);var y=s;s=f,f=y}var l=0,u=e;for(w=1;w<=t;w++){var A=s[w];A<u&&(l=w-1,u=A)}var I=r,d=new Int32Array(v);d[v-1]=l;for(w=v-2;w+1>0;w--){var p=d[w+1];d[w]=p+I[p+(w+1)*t]}return d}function n(e,a,n,t,v){var o=t[e],i=0,f=t[e-1];f<o&&(o=f,i=-1);var s=t[e+1];s<o&&(o=s,i=1),r[a]=i,n[e]=v[a]+o}exports.findVerticalSeam=a;
},{}],"BEK4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeSeamRGB=exports.computeEnergies=exports.initEnergyPicture=exports.latestSeam=void 0;var r=new Uint8Array(0),t=new Uint8Array(0),e=new Uint8Array(0),a=new Int16Array(0);exports.latestSeam=new Int32Array(0);var n=0;function i(i,o,s){var p=o+2;n=p;var h=p*(s+2)+8;r.length<h&&(r=new Uint8Array(h),t=new Uint8Array(h),e=new Uint8Array(h));var y=i.length>>2;a.length<y&&(a=new Int16Array(y+8));for(var v=0,c=p+1,m=0;m<s;m++){for(var x=0;x<o;x++)r[c]=i[v],t[c]=i[v+1],e[c]=i[v+2],v+=4,c++;c+=2}}function o(i,o){for(var s=i+2,p=n+1,h=exports.latestSeam.length===o,y=0,v=0-i,c=n+1-s,m=0;m<o;m++){y=v+=i,p=c+=s;var x=0,f=i;if(h){var u=exports.latestSeam[m];x=Math.min(Math.max(0,u-2),i-8),f=Math.min(i,u+2),p=c+x,y+=x}for(var l=x;l<f;l+=1,y+=1){var M=p-s,w=p+s,A=p-1,g=p+1,W=Math.abs(r[M]-r[w])+Math.abs(r[A]-r[g])+Math.abs(t[M]-t[w])+Math.abs(t[A]-t[g])+Math.abs(e[M]-e[w])+Math.abs(e[A]-e[g]);a[y]=W,p+=1}}return a}function s(i,o,s){for(var p=s,h=o,y=h-1,v=1*(h+2),c=1*(y+2),m=n,x=m,f=0;f<p;f++,m+=v,x+=c){var u=i[f]+1;r.copyWithin(x,m,m+u),r.copyWithin(x+u,m+u+1,m+v),t.copyWithin(x,m,m+u),t.copyWithin(x+u,m+u+1,m+v),e.copyWithin(x,m,m+u),e.copyWithin(x+u,m+u+1,m+v)}var l=h,M=y;m=0,x=0;for(f=0;f<p;f++,m+=l,x+=M){u=i[f];a.copyWithin(x,m,m+u),a.copyWithin(x+u,m+u+1,m+l)}}exports.initEnergyPicture=i,exports.computeEnergies=o,exports.removeSeamRGB=s;
},{}],"BTJT":[function(require,module,exports) {
"use strict";function e(e,o,r,t){for(var i=o,a=Math.floor(t),n=Math.floor(r),p=4*n,s=4*(n-1),v=0,c=0,f=0;f<a;f++,v+=p,c+=s){var u=4*e[f];i.copyWithin(c,v,v+u),i.copyWithin(c+u,v+u+4,v+p)}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeSeam=void 0,exports.removeSeam=e;
},{}],"I3Un":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RegularEngine=void 0;var e=require("./find-seam"),i=require("./energy"),t=require("./remove-seam"),a=function(){function a(){this.imageData=new Uint8ClampedArray(0),this.imageWidth=0,this.imageHeight=0,this.energies=new Int16Array(0)}return a.prototype.init=function(e,t){this.imageData=e,this.imageWidth=t,this.imageHeight=e.length/4/t,i.initEnergyPicture(e,this.imageWidth,this.imageHeight)},a.prototype.shrink=function(){var a=this.imageData.length/4;this.energies.length<a&&(this.energies=new Int16Array(a+8));for(var h=0;h<10;h++){this.energies=i.computeEnergies(this.imageWidth,this.imageHeight);var r=e.findVerticalSeam(this.energies,this.imageWidth,this.imageHeight,a);this.imageData=t.removeSeam(r,this.imageData,this.imageWidth,this.imageHeight),i.removeSeamRGB(r,this.imageWidth,this.imageHeight),this.imageWidth--}return this.imageData},a}();exports.RegularEngine=a;
},{"./find-seam":"z7uU","./energy":"BEK4","./remove-seam":"BTJT"}],"S0DU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shrinkImage=exports.shrinkWidthWithForwardEnergy=exports.shrinkWidth=void 0;var t,r,e=require("./engine"),i=new e.RegularEngine;function n(t,r){return i.init(t,r),i.shrink()}function h(e,i){t=e,r=i,d.createWithForwardEnergy(t,r)}function o(){return i.shrink()}exports.shrinkWidth=n,exports.shrinkWidthWithForwardEnergy=h,exports.shrinkImage=o;var s=function(){function t(t,r){this.data=t,this.ptr=r}return Object.defineProperty(t.prototype,"red",{get:function(){return this.data[this.ptr]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this.data[this.ptr+1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this.data[this.ptr+2]},enumerable:!1,configurable:!0}),t.prototype.move=function(t){return this.ptr=t,this},t}(),a=new Uint8ClampedArray(3);a[0]=255,a[1]=255,a[2]=255;var u=new s(a,0);function g(t,r){var e=t.red-r.red,i=t.green-r.green,n=t.blue-r.blue;return n*n+i*i+e*e}var c=function(){function t(t,r,e){this.data=t,this.width=r,this.height=e,this.northColor=new s(t,0),this.southColor=new s(t,0),this.westColor=new s(t,0),this.eastColor=new s(t,0),this.firstColor=new s(t,0),this.secondColor=new s(t,0)}return t.prototype.toPtr=function(t,r){return t+r*this.width<<2},t.prototype.getColorAt=function(t,r){return t<0||t>=this.width||r<0||r>=this.height?u:new s(this.data,this.toPtr(t,r))},t.prototype.isOut=function(t,r){return t<0||t>=this.width||r<0||r>=this.height},t.prototype.energyAt=function(t,r){var e=this.isOut(t,r-1)?u:this.northColor.move(this.toPtr(t,r-1)),i=this.isOut(t,r+1)?u:this.southColor.move(this.toPtr(t,r+1)),n=this.isOut(t-1,r)?u:this.westColor.move(this.toPtr(t-1,r)),h=this.isOut(t+1,r)?u:this.eastColor.move(this.toPtr(t+1,r));return g(e,i)+g(h,n)},t.prototype.energyDelta=function(t,r,e,i){return g(this.isOut(t,r)?u:this.firstColor.move(this.toPtr(t,r)),this.isOut(e,i)?u:this.secondColor.move(this.toPtr(e,i)))},t}(),d=function(){function t(t,r,e){this.data=t,this.width=r,this.forwardEnergy=e,this.init(t,r)}return t.create=function(r,e){return t.instance=new t(r,e,!1),t.instance},t.createWithForwardEnergy=function(r,e){return t.instance=new t(r,e,!0),t.instance},t.recycle=function(r,e){return t.instance.init(r,e),t.instance},t.prototype.init=function(t,r){this.picture=new c(t,r,t.length/(4*r)),this.forwardEnergy?(this.backPtrWeights=new Int8Array(t.length>>2),this.oddLineWeights=new Float32Array(this.width),this.evenLineWeights=new Float32Array(this.width)):this.initEnergies()},t.prototype.initEnergies=function(){var t=this.energies,r=this.data.length>>2;(!t||t.length<r)&&(t=new Float32Array(r),this.backPtrWeights=new Int8Array(r),this.oddLineWeights=new Float32Array(this.width),this.evenLineWeights=new Float32Array(this.width));for(var e=this.picture,i=0,n=0,h=e.height;i<h;i++)for(var o=0,s=e.width;o<s;o++,n++)t[n]=e.energyAt(o,i);this.energies=t},t.prototype.weightFrom=function(t,r,e){return r<0||r>=e?Number.MAX_VALUE:t[r]},t.prototype.cumulateWeights=function(t,r,e,i,n){var h=this.weightFrom(n,t,e),o=0,s=this.weightFrom(n,t-1,e);s<h&&(h=s,o=-1);var a=this.weightFrom(n,t+1,e);a<h&&(h=a,o=1),this.backPtrWeights[r]=o,i[t]=this.energies[r]+h},t.prototype.findVerticalSeamWithoutForwardEnergy=function(){var t=this.picture,r=Math.floor(t.height),e=Math.floor(t.width),i=e,n=this.evenLineWeights,h=this.oddLineWeights;n.set(this.energies.subarray(0,e));for(var o=1;o<r;o++){for(var s=0;s<e;s++,i++)this.cumulateWeights(s,i,e,h,n);var a=h;h=n,n=a}var u=0,g=Number.MAX_VALUE;for(s=0;s<e;s++){var c=h[s];c<g&&(u=s,g=c)}var d=this.backPtrWeights,f=new Array(r);f[r-1]=u;for(s=r-2;s+1>0;s--){var p=f[s+1],l=p+d[p+(s+1)*e];f[s]=l}return f},t.prototype.cumulateWeightsWithForwardEnergy=function(t,r,e,i,n){var h=this.picture,o=h.width,s=h.energyDelta(t-1,r,t+1,r),a=s+h.energyDelta(t,r-1,t-1,r),u=s+h.energyDelta(t,r-1,t+1,r),g=this.weightFrom(n,t,o)+s,c=0,d=this.weightFrom(n,t-1,o)+a;d<g&&(g=d,c=-1);var f=this.weightFrom(n,t+1,o)+u;f<g&&(g=f,c=1),this.backPtrWeights[e]=c,i[t]=g},t.prototype.findVerticalSeamWithForwardEnergy=function(){var t=this.picture,r=Math.floor(t.height),e=Math.floor(t.width),i=e;this.evenLineWeights.fill(0);for(var n=this.evenLineWeights,h=this.oddLineWeights,o=1;o<r;o++){for(var s=0;s<e;s++,i++)this.cumulateWeightsWithForwardEnergy(s,o,i,h,n);var a=h;h=n,n=a}var u=0,g=Number.MAX_VALUE;for(s=0;s<e;s++){var c=h[s];c<g&&(u=s,g=c)}var d=this.backPtrWeights,f=new Array(r);f[r-1]=u;for(s=r-2;s+1>0;s--){var p=f[s+1],l=p+d[p+(s+1)*e];f[s]=l}return f},t.prototype.findVerticalSeam=function(){return this.forwardEnergy?this.findVerticalSeamWithForwardEnergy():this.findVerticalSeamWithoutForwardEnergy()},t.prototype.shrinkWidth=function(){var t=this.findVerticalSeam();this.seam=t;for(var r=this.picture,e=r.data,i=Math.floor(r.height),n=Math.floor(r.width),h=4*n,o=4*(n-1),s=0,a=0,u=0;u<i;u++,s+=h,a+=o){var g=4*t[u];e.copyWithin(a,s,s+g),e.copyWithin(a+g,s+g+4,s+h)}return e},t}();
},{"./engine":"I3Un"}],"FLXH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsShrinkByHalf=void 0;var e=require("./seam-carving");window.OffscreenCanvas||(window.OffscreenCanvas=function(){return function(e,n){var t=this;return this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=n,this.canvas.convertToBlob=function(){return new Promise(function(e){t.canvas.toBlob(e)})},this.canvas}}());var n=function(e){return new Promise(function(n){var t=new Image;t.src=e,t.onload=function(){var e=new OffscreenCanvas(t.width,t.height).getContext("2d");e.drawImage(t,0,0),n(e.getImageData(0,0,t.width,t.height))}})},t=function(e){return new Promise(function(t){var a=new FileReader;a.onload=function(e){var a=n(e.currentTarget.result);t(a)},a.readAsDataURL(e)})},a=void 0,r=function(e,n){var t=document.getElementById("canvas"),a=e.width-10,r=e.height;t.width=a,t.height=r;var i=t.getContext("2d"),o=i.createImageData(a,r);return o.data.set(n.subarray(0,a*r*4)),i.putImageData(o,0,0),o},i=function(n){a&&cancelAnimationFrame(a);var t=n.width,i=new Uint8ClampedArray(n.data),o=e.shrinkWidth(i,t);n=r(n,o);var s,c=0,u=document.getElementById("canvasCaption"),d=Date.now();s=t/2,a=requestAnimationFrame(function t(){var i=e.shrinkImage();n=r(n,i),c+=10;var o=Date.now()-d;u.innerHTML="Width reduced by "+c+"px after "+o+"ms",c<s&&(a=requestAnimationFrame(t))})};exports.jsShrinkByHalf=i;
},{"./seam-carving":"S0DU"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(i,a){function o(e){try{u(r.next(e))}catch(n){a(n)}}function c(e){try{u(r.throw(e))}catch(n){a(n)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,c)}u((r=r.apply(e,n||[])).next())})},n=this&&this.__generator||function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(e,o)}catch(c){a=[6,c],r=0}finally{t=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=t(require("@assemblyscript/loader")),i=require("./index.js");window.OffscreenCanvas||(window.OffscreenCanvas=function(){return function(e,n){var t=this;return this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=n,this.canvas.convertToBlob=function(){return new Promise(function(e){t.canvas.toBlob(e)})},this.canvas}}());var a=function(){return e(void 0,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,r.default.instantiate(fetch("optimized.wasm"))];case 1:return[2,e.sent()]}})})},o=function(e){return new Promise(function(n){var t=new Image;t.src=e,t.onload=function(){var e=new OffscreenCanvas(t.width,t.height).getContext("2d");e.drawImage(t,0,0),n(e.getImageData(0,0,t.width,t.height))}})},c=function(e){return new Promise(function(n){var t=new FileReader;t.onload=function(e){var t=o(e.currentTarget.result);n(t)},t.readAsDataURL(e)})},u=void 0,s=function(e,n){var t=document.getElementById("canvas"),r=e.width-10,i=e.height;t.width=r,t.height=i;var a=t.getContext("2d"),o=a.createImageData(r,i);return o.data.set(n.subarray(0,r*i*4)),a.putImageData(o,0,0),o},l=function(e,n,t){u&&cancelAnimationFrame(u);var r=e.width,i=n.exports,a=i.__pin,o=i.__unpin,c=i.__newArray,l=(i.__getArray,i.__getArrayView,i.__getUint8ArrayView),d=i.UINT8ARRAY_ID,f=(i.shrinkWidthWithForwardEnergy,i.shrinkWidth),h=a(c(d,e.data)),v=f(h,r,!!t),w=l(v);e=s(e,w),o(h);var m,g=0,p=document.getElementById("canvasCaption"),y=Date.now();m=r/2,u=requestAnimationFrame(function t(){var r=n.exports.shrink(),i=l(r);e=s(e,i),g+=10;var a=Date.now()-y;p.innerHTML="Width reduced by "+g+"px after "+a+"ms",g<m&&(u=requestAnimationFrame(t))})},d=function(){return e(void 0,void 0,void 0,function(){var t,r,u,s,d;return n(this,function(f){switch(f.label){case 0:return[4,new Promise(function(e){return window.addEventListener("load",e)})];case 1:return f.sent(),[4,a()];case 2:return t=f.sent(),console.log(t),u=!1,s=!1,d=function(e){u?l(e,t,s):i.jsShrinkByHalf(e)},fetch("surfer-web.jpg").then(function(e){return e.arrayBuffer()}).then(function(e){var n=new Uint8Array(e),t=new Blob([n],{type:"image/jpeg"}),r=(window.URL||window.webkitURL).createObjectURL(t);return o(r)}).then(function(e){d(r=e)}),document.getElementById("originalFile").addEventListener("change",function(t){return e(void 0,void 0,void 0,function(){var e;return n(this,function(n){switch(n.label){case 0:return e=t.target.files,[4,c(e[0])];case 1:return r=n.sent(),d(r),[2]}})})}),document.getElementById("implem-js").addEventListener("click",function(){u=!1,s=!1,d(r)}),document.getElementById("implem-as").addEventListener("click",function(){u=!0,s=!1,d(r)}),document.getElementById("implem-as-simd").addEventListener("click",function(){u=!0,s=!0,d(r)}),[2]}})})};d();
},{"@assemblyscript/loader":"k3Ah","./index.js":"FLXH"}]},{},["QCba"], null)
//# sourceMappingURL=src.554d4635.js.map