{"version":3,"sources":["../node_modules/@assemblyscript/loader/index.js","find-seam.ts","energy.ts","remove-seam.ts","engine.ts","seam-carving.ts","index.js.ts","index.ts","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["ID_OFFSET","SIZE_OFFSET","ARRAYBUFFER_ID","STRING_ID","ARRAYBUFFERVIEW","ARRAY","STATICARRAY","VAL_ALIGN_OFFSET","VAL_SIGNED","VAL_FLOAT","VAL_MANAGED","ARRAYBUFFERVIEW_BUFFER_OFFSET","ARRAYBUFFERVIEW_DATASTART_OFFSET","ARRAYBUFFERVIEW_BYTELENGTH_OFFSET","ARRAYBUFFERVIEW_SIZE","ARRAY_LENGTH_OFFSET","ARRAY_SIZE","E_NO_EXPORT_TABLE","E_NO_EXPORT_RUNTIME","F_NO_EXPORT_RUNTIME","Error","BIGINT","BigUint64Array","THIS","Symbol","STRING_SMALLSIZE","STRING_CHUNKSIZE","utf16","TextDecoder","fatal","Object","hasOwn","obj","prop","prototype","hasOwnProperty","call","getStringImpl","buffer","ptr","len","Uint32Array","wtf16","Uint16Array","String","fromCharCode","decode","str","off","subarray","preInstantiate","imports","extendedExports","getString","memory","env","abort","msg","file","line","colm","trace","n","args","console","log","slice","join","seed","Date","now","Math","postInstantiate","instance","exports","table","__new","__pin","__unpin","__collect","__rtti_base","getRttiCount","arr","getRttInfo","id","U32","getRttBase","getArrayInfo","info","getValueAlign","clz32","__newString","length","U16","i","p","charCodeAt","__newArrayBuffer","buf","bufview","Uint8Array","U8","set","__getString","getView","alignLog2","signed","float","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","BigInt64Array","__newArray","valuesOrCapacity","input","align","isArrayLike","result","view","start","__getArrayView","__getArray","out","Array","__getArrayBuffer","__getFunction","index","get","getTypedArray","Type","getTypedArrayView","attachTypedArrayFunctions","ctor","name","bind","Uint8ClampedArray","forEach","BYTES_PER_ELEMENT","__instanceof","baseId","demangle","isResponse","src","Response","isModule","WebAssembly","Module","instantiate","source","instantiateStreaming","module","compile","extended","instantiateSync","Instance","arrayBuffer","setArgumentsLength","value","internalName","keys","elem","parts","split","curr","part","shift","hash","indexOf","className","substring","classElem","wrap","constructor","valueOf","thisValue","create","writable","getOwnPropertyNames","defineProperty","getOwnPropertyDescriptor","test","getter","replace","setter","enumerable","original","OVERLAY_ID","OldModule","bundle","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.77de5100.js","sourceRoot":"../src","sourcesContent":["// Runtime header offsets\nconst ID_OFFSET = -8;\nconst SIZE_OFFSET = -4;\n\n// Runtime ids\nconst ARRAYBUFFER_ID = 0;\nconst STRING_ID = 1;\n// const ARRAYBUFFERVIEW_ID = 2;\n\n// Runtime type information\nconst ARRAYBUFFERVIEW = 1 << 0;\nconst ARRAY = 1 << 1;\nconst STATICARRAY = 1 << 2;\n// const SET = 1 << 3;\n// const MAP = 1 << 4;\nconst VAL_ALIGN_OFFSET = 6;\n// const VAL_ALIGN = 1 << VAL_ALIGN_OFFSET;\nconst VAL_SIGNED = 1 << 11;\nconst VAL_FLOAT = 1 << 12;\n// const VAL_NULLABLE = 1 << 13;\nconst VAL_MANAGED = 1 << 14;\n// const KEY_ALIGN_OFFSET = 15;\n// const KEY_ALIGN = 1 << KEY_ALIGN_OFFSET;\n// const KEY_SIGNED = 1 << 20;\n// const KEY_FLOAT = 1 << 21;\n// const KEY_NULLABLE = 1 << 22;\n// const KEY_MANAGED = 1 << 23;\n\n// Array(BufferView) layout\nconst ARRAYBUFFERVIEW_BUFFER_OFFSET = 0;\nconst ARRAYBUFFERVIEW_DATASTART_OFFSET = 4;\nconst ARRAYBUFFERVIEW_BYTELENGTH_OFFSET = 8;\nconst ARRAYBUFFERVIEW_SIZE = 12;\nconst ARRAY_LENGTH_OFFSET = 12;\nconst ARRAY_SIZE = 16;\n\nconst E_NO_EXPORT_TABLE   = \"Operation requires compiling with --exportTable\";\nconst E_NO_EXPORT_RUNTIME = \"Operation requires compiling with --exportRuntime\";\nconst F_NO_EXPORT_RUNTIME = () => { throw Error(E_NO_EXPORT_RUNTIME); };\n\nconst BIGINT = typeof BigUint64Array !== \"undefined\";\nconst THIS = Symbol();\n\nconst STRING_SMALLSIZE = 192; // break-even point in V8\nconst STRING_CHUNKSIZE = 1024; // mitigate stack overflow\nconst utf16 = new TextDecoder(\"utf-16le\", { fatal: true }); // != wtf16\n\n/** polyfill for Object.hasOwn */\nObject.hasOwn = Object.hasOwn || function(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n};\n\n/** Gets a string from memory. */\nfunction getStringImpl(buffer, ptr) {\n  let len = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2] >>> 1;\n  const wtf16 = new Uint16Array(buffer, ptr, len);\n  if (len <= STRING_SMALLSIZE) return String.fromCharCode(...wtf16);\n  try {\n    return utf16.decode(wtf16);\n  } catch {\n    let str = \"\", off = 0;\n    while (len - off > STRING_CHUNKSIZE) {\n      str += String.fromCharCode(...wtf16.subarray(off, off += STRING_CHUNKSIZE));\n    }\n    return str + String.fromCharCode(...wtf16.subarray(off));\n  }\n}\n\n/** Prepares the base module prior to instantiation. */\nfunction preInstantiate(imports) {\n  const extendedExports = {};\n\n  function getString(memory, ptr) {\n    if (!memory) return \"<yet unknown>\";\n    return getStringImpl(memory.buffer, ptr);\n  }\n\n  // add common imports used by stdlib for convenience\n  const env = (imports.env = imports.env || {});\n  env.abort = env.abort || function abort(msg, file, line, colm) {\n    const memory = extendedExports.memory || env.memory; // prefer exported, otherwise try imported\n    throw Error(`abort: ${getString(memory, msg)} at ${getString(memory, file)}:${line}:${colm}`);\n  };\n  env.trace = env.trace || function trace(msg, n, ...args) {\n    const memory = extendedExports.memory || env.memory;\n    console.log(`trace: ${getString(memory, msg)}${n ? \" \" : \"\"}${args.slice(0, n).join(\", \")}`);\n  };\n  env.seed = env.seed || Date.now;\n  imports.Math = imports.Math || Math;\n  imports.Date = imports.Date || Date;\n\n  return extendedExports;\n}\n\n/** Prepares the final module once instantiation is complete. */\nfunction postInstantiate(extendedExports, instance) {\n  const exports = instance.exports;\n  const memory = exports.memory;\n  const table = exports.table;\n  const __new = exports.__new || F_NO_EXPORT_RUNTIME;\n  const __pin = exports.__pin || F_NO_EXPORT_RUNTIME;\n  const __unpin = exports.__unpin || F_NO_EXPORT_RUNTIME;\n  const __collect = exports.__collect || F_NO_EXPORT_RUNTIME;\n  const __rtti_base = exports.__rtti_base;\n  const getRttiCount = __rtti_base ? arr => arr[__rtti_base >>> 2] : F_NO_EXPORT_RUNTIME;\n\n  extendedExports.__new = __new;\n  extendedExports.__pin = __pin;\n  extendedExports.__unpin = __unpin;\n  extendedExports.__collect = __collect;\n\n  /** Gets the runtime type info for the given id. */\n  function getRttInfo(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    if ((id >>>= 0) >= getRttiCount(U32)) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + (id << 1)];\n  }\n\n  /** Gets the runtime base id for the given id. */\n  function getRttBase(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    if ((id >>>= 0) >= getRttiCount(U32)) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + (id << 1) + 1];\n  }\n\n  /** Gets and validate runtime type info for the given id for array like objects */\n  function getArrayInfo(id) {\n    const info = getRttInfo(id);\n    if (!(info & (ARRAYBUFFERVIEW | ARRAY | STATICARRAY))) throw Error(`not an array: ${id}, flags=${info}`);\n    return info;\n  }\n\n  /** Gets the runtime alignment of a collection's values. */\n  function getValueAlign(info) {\n    return 31 - Math.clz32((info >>> VAL_ALIGN_OFFSET) & 31); // -1 if none\n  }\n\n  /** Gets the runtime alignment of a collection's keys. */\n  // function getKeyAlign(info) {\n  //   return 31 - Math.clz32((info >>> KEY_ALIGN_OFFSET) & 31); // -1 if none\n  // }\n\n  /** Allocates a new string in the module's memory and returns its pointer. */\n  function __newString(str) {\n    if (str == null) return 0;\n    const length = str.length;\n    const ptr = __new(length << 1, STRING_ID);\n    const U16 = new Uint16Array(memory.buffer);\n    for (var i = 0, p = ptr >>> 1; i < length; ++i) U16[p + i] = str.charCodeAt(i);\n    return ptr;\n  }\n\n  extendedExports.__newString = __newString;\n\n  /** Allocates a new ArrayBuffer in the module's memory and returns its pointer. */\n  function __newArrayBuffer(buf) {\n    if (buf == null) return 0;\n    const bufview = new Uint8Array(buf);\n    const ptr = __new(bufview.length, ARRAYBUFFER_ID);\n    const U8 = new Uint8Array(memory.buffer);\n    U8.set(bufview, ptr);\n    return ptr;\n  }\n\n  extendedExports.__newArrayBuffer = __newArrayBuffer;\n\n  /** Reads a string from the module's memory by its pointer. */\n  function __getString(ptr) {\n    if (!ptr) return null;\n    const buffer = memory.buffer;\n    const id = new Uint32Array(buffer)[ptr + ID_OFFSET >>> 2];\n    if (id !== STRING_ID) throw Error(`not a string: ${ptr}`);\n    return getStringImpl(buffer, ptr);\n  }\n\n  extendedExports.__getString = __getString;\n\n  /** Gets the view matching the specified alignment, signedness and floatness. */\n  function getView(alignLog2, signed, float) {\n    const buffer = memory.buffer;\n    if (float) {\n      switch (alignLog2) {\n        case 2: return new Float32Array(buffer);\n        case 3: return new Float64Array(buffer);\n      }\n    } else {\n      switch (alignLog2) {\n        case 0: return new (signed ? Int8Array : Uint8Array)(buffer);\n        case 1: return new (signed ? Int16Array : Uint16Array)(buffer);\n        case 2: return new (signed ? Int32Array : Uint32Array)(buffer);\n        case 3: return new (signed ? BigInt64Array : BigUint64Array)(buffer);\n      }\n    }\n    throw Error(`unsupported align: ${alignLog2}`);\n  }\n\n  /** Allocates a new array in the module's memory and returns its pointer. */\n  function __newArray(id, valuesOrCapacity = 0) {\n    const input = valuesOrCapacity;\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    const isArrayLike = typeof input !== \"number\";\n    const length = isArrayLike ? input.length : input;\n    const buf = __new(length << align, info & STATICARRAY ? id : ARRAYBUFFER_ID);\n    let result;\n    if (info & STATICARRAY) {\n      result = buf;\n    } else {\n      __pin(buf);\n      const arr = __new(info & ARRAY ? ARRAY_SIZE : ARRAYBUFFERVIEW_SIZE, id);\n      __unpin(buf);\n      const U32 = new Uint32Array(memory.buffer);\n      U32[arr + ARRAYBUFFERVIEW_BUFFER_OFFSET >>> 2] = buf;\n      U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2] = buf;\n      U32[arr + ARRAYBUFFERVIEW_BYTELENGTH_OFFSET >>> 2] = length << align;\n      if (info & ARRAY) U32[arr + ARRAY_LENGTH_OFFSET >>> 2] = length;\n      result = arr;\n    }\n    if (isArrayLike) {\n      const view = getView(align, info & VAL_SIGNED, info & VAL_FLOAT);\n      const start = buf >>> align;\n      if (info & VAL_MANAGED) {\n        for (let i = 0; i < length; ++i) {\n          view[start + i] = input[i];\n        }\n      } else {\n        view.set(input, start);\n      }\n    }\n    return result;\n  }\n\n  extendedExports.__newArray = __newArray;\n\n  /** Gets a live view on an array's values in the module's memory. Infers the array type from RTTI. */\n  function __getArrayView(arr) {\n    const U32 = new Uint32Array(memory.buffer);\n    const id = U32[arr + ID_OFFSET >>> 2];\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    let buf = info & STATICARRAY\n      ? arr\n      : U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    const length = info & ARRAY\n      ? U32[arr + ARRAY_LENGTH_OFFSET >>> 2]\n      : U32[buf + SIZE_OFFSET >>> 2] >>> align;\n    return getView(align, info & VAL_SIGNED, info & VAL_FLOAT).subarray(buf >>>= align, buf + length);\n  }\n\n  extendedExports.__getArrayView = __getArrayView;\n\n  /** Copies an array's values from the module's memory. Infers the array type from RTTI. */\n  function __getArray(arr) {\n    const input = __getArrayView(arr);\n    const len = input.length;\n    const out = new Array(len);\n    for (let i = 0; i < len; i++) out[i] = input[i];\n    return out;\n  }\n\n  extendedExports.__getArray = __getArray;\n\n  /** Copies an ArrayBuffer's value from the module's memory. */\n  function __getArrayBuffer(ptr) {\n    const buffer = memory.buffer;\n    const length = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2];\n    return buffer.slice(ptr, ptr + length);\n  }\n\n  extendedExports.__getArrayBuffer = __getArrayBuffer;\n\n  /** Gets a function from poiner which contain table's index. */\n  function __getFunction(ptr) {\n    if (!table) throw Error(E_NO_EXPORT_TABLE);\n    const index = new Uint32Array(memory.buffer)[ptr >>> 2];\n    return table.get(index);\n  }\n\n  extendedExports.__getFunction = __getFunction;\n\n  /** Copies a typed array's values from the module's memory. */\n  function getTypedArray(Type, alignLog2, ptr) {\n    return new Type(getTypedArrayView(Type, alignLog2, ptr));\n  }\n\n  /** Gets a live view on a typed array's values in the module's memory. */\n  function getTypedArrayView(Type, alignLog2, ptr) {\n    const buffer = memory.buffer;\n    const U32 = new Uint32Array(buffer);\n    return new Type(\n      buffer,\n      U32[ptr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2],\n      U32[ptr + ARRAYBUFFERVIEW_BYTELENGTH_OFFSET >>> 2] >>> alignLog2\n    );\n  }\n\n  /** Attach a set of get TypedArray and View functions to the exports. */\n  function attachTypedArrayFunctions(ctor, name, align) {\n    extendedExports[`__get${name}`] = getTypedArray.bind(null, ctor, align);\n    extendedExports[`__get${name}View`] = getTypedArrayView.bind(null, ctor, align);\n  }\n\n  [\n    Int8Array,\n    Uint8Array,\n    Uint8ClampedArray,\n    Int16Array,\n    Uint16Array,\n    Int32Array,\n    Uint32Array,\n    Float32Array,\n    Float64Array\n  ].forEach(ctor => {\n    attachTypedArrayFunctions(ctor, ctor.name, 31 - Math.clz32(ctor.BYTES_PER_ELEMENT));\n  });\n\n  if (BIGINT) {\n    [BigUint64Array, BigInt64Array].forEach(ctor => {\n      attachTypedArrayFunctions(ctor, ctor.name.slice(3), 3);\n    });\n  }\n\n  /** Tests whether an object is an instance of the class represented by the specified base id. */\n  function __instanceof(ptr, baseId) {\n    const U32 = new Uint32Array(memory.buffer);\n    let id = U32[ptr + ID_OFFSET >>> 2];\n    if (id <= getRttiCount(U32)) {\n      do {\n        if (id == baseId) return true;\n        id = getRttBase(id);\n      } while (id);\n    }\n    return false;\n  }\n\n  extendedExports.__instanceof = __instanceof;\n\n  // Pull basic exports to extendedExports so code in preInstantiate can use them\n  extendedExports.memory = extendedExports.memory || memory;\n  extendedExports.table  = extendedExports.table  || table;\n\n  // Demangle exports and provide the usual utility on the prototype\n  return demangle(exports, extendedExports);\n}\n\nfunction isResponse(src) {\n  return typeof Response !== \"undefined\" && src instanceof Response;\n}\n\nfunction isModule(src) {\n  return src instanceof WebAssembly.Module;\n}\n\n/** Asynchronously instantiates an AssemblyScript module from anything that can be instantiated. */\nexport async function instantiate(source, imports = {}) {\n  if (isResponse(source = await source)) return instantiateStreaming(source, imports);\n  const module = isModule(source) ? source : await WebAssembly.compile(source);\n  const extended = preInstantiate(imports);\n  const instance = await WebAssembly.instantiate(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. */\nexport function instantiateSync(source, imports = {}) {\n  const module = isModule(source) ? source : new WebAssembly.Module(source);\n  const extended = preInstantiate(imports);\n  const instance = new WebAssembly.Instance(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by `fetch`. */\nexport async function instantiateStreaming(source, imports = {}) {\n  if (!WebAssembly.instantiateStreaming) {\n    return instantiate(\n      isResponse(source = await source)\n        ? source.arrayBuffer()\n        : source,\n      imports\n    );\n  }\n  const extended = preInstantiate(imports);\n  const result = await WebAssembly.instantiateStreaming(source, imports);\n  const exports = postInstantiate(extended, result.instance);\n  return { ...result, exports };\n}\n\n/** Demangles an AssemblyScript module's exports to a friendly object structure. */\nexport function demangle(exports, extendedExports = {}) {\n  const setArgumentsLength = exports[\"__argumentsLength\"]\n    ? length => { exports[\"__argumentsLength\"].value = length; }\n    : exports[\"__setArgumentsLength\"] || exports[\"__setargc\"] || (() => { /* nop */ });\n  for (let internalName of Object.keys(exports)) {\n    const elem = exports[internalName];\n    let parts = internalName.split(\".\");\n    let curr = extendedExports;\n    while (parts.length > 1) {\n      let part = parts.shift();\n      if (!Object.hasOwn(curr, part)) curr[part] = {};\n      curr = curr[part];\n    }\n    let name = parts[0];\n    let hash = name.indexOf(\"#\");\n    if (hash >= 0) {\n      const className = name.substring(0, hash);\n      const classElem = curr[className];\n      if (typeof classElem === \"undefined\" || !classElem.prototype) {\n        const ctor = function(...args) {\n          return ctor.wrap(ctor.prototype.constructor(0, ...args));\n        };\n        ctor.prototype = {\n          valueOf() { return this[THIS]; }\n        };\n        ctor.wrap = function(thisValue) {\n          return Object.create(ctor.prototype, { [THIS]: { value: thisValue, writable: false } });\n        };\n        if (classElem) Object.getOwnPropertyNames(classElem).forEach(name =>\n          Object.defineProperty(ctor, name, Object.getOwnPropertyDescriptor(classElem, name))\n        );\n        curr[className] = ctor;\n      }\n      name = name.substring(hash + 1);\n      curr = curr[className].prototype;\n      if (/^(get|set):/.test(name)) {\n        if (!Object.hasOwn(curr, name = name.substring(4))) {\n          let getter = exports[internalName.replace(\"set:\", \"get:\")];\n          let setter = exports[internalName.replace(\"get:\", \"set:\")];\n          Object.defineProperty(curr, name, {\n            get() { return getter(this[THIS]); },\n            set(value) { setter(this[THIS], value); },\n            enumerable: true\n          });\n        }\n      } else {\n        if (name === 'constructor') {\n          (curr[name] = function(...args) {\n            setArgumentsLength(args.length);\n            return elem(...args);\n          }).original = elem;\n        } else { // instance method\n          (curr[name] = function(...args) { // !\n            setArgumentsLength(args.length);\n            return elem(this[THIS], ...args);\n          }).original = elem;\n        }\n      }\n    } else {\n      if (/^(get|set):/.test(name)) {\n        if (!Object.hasOwn(curr, name = name.substring(4))) {\n          Object.defineProperty(curr, name, {\n            get: exports[internalName.replace(\"set:\", \"get:\")],\n            set: exports[internalName.replace(\"get:\", \"set:\")],\n            enumerable: true\n          });\n        }\n      } else if (typeof elem === \"function\" && elem !== setArgumentsLength) {\n        (curr[name] = (...args) => {\n          setArgumentsLength(args.length);\n          return elem(...args);\n        }).original = elem;\n      } else {\n        curr[name] = elem;\n      }\n    }\n  }\n  return extendedExports;\n}\n\nexport default {\n  instantiate,\n  instantiateSync,\n  instantiateStreaming,\n  demangle\n};\n","let backPtrWeights: Int8Array = new Int8Array(0);\n\nconst i32_MAX_VALUE = Math.pow(2, 31) -1; \n\nexport function findVerticalSeam(\n  energies: Int16Array,\n  imageWidth: number,\n  imageHeight: number,\n  numberOfPixels: number\n): Int32Array {\n  if (backPtrWeights.length < numberOfPixels) {\n    backPtrWeights = new Int8Array(numberOfPixels);\n  }\n\n  let weightIndex = imageWidth;\n\n  const padding = new Int32Array([i32_MAX_VALUE]);\n  let previousLineWeights = new Int32Array(imageWidth + 2);\n  previousLineWeights[0] = i32_MAX_VALUE;\n  previousLineWeights[imageWidth + 1] = i32_MAX_VALUE;\n  previousLineWeights.set(energies.slice(0, imageWidth), 1);\n\n  let currentLineWeights = new Int32Array(imageWidth + 2);\n  \n  // border padding\n  currentLineWeights[0] = i32_MAX_VALUE;\n  currentLineWeights[imageWidth + 1] = i32_MAX_VALUE;\n\n  for (let j: number = 1; j < imageHeight; j++) {\n    for (let i: number = 1; i <= imageWidth; i++, weightIndex++) {\n      cumulateWeights(\n        i,\n        weightIndex,\n        currentLineWeights,\n        previousLineWeights,\n        energies\n      );\n    }\n    let swapTmp = currentLineWeights;\n    currentLineWeights = previousLineWeights;\n    previousLineWeights = swapTmp;\n  }\n\n \n  // find index of last seam pixel\n  let lastIndex = 0;\n  let lastIndexWeight = i32_MAX_VALUE;\n\n  for (let i = 1; i <= imageWidth; i++) {\n    let weight = currentLineWeights[i];\n    if (weight < lastIndexWeight) {\n      lastIndex = i - 1; // remove padding\n      lastIndexWeight = weight;\n    }\n  }\n\n  const weights = backPtrWeights;\n  const seam = new Int32Array(imageHeight);\n  seam[imageHeight - 1] = lastIndex;\n  //trace('seam', 2, imageHeight - 1, lastIndex);\n  for (let i = imageHeight - 2; i + 1 > 0; i--) {\n    let next = seam[i + 1];\n    seam[i] = next + weights[next + (i + 1) * imageWidth];\n    //trace('seam', 2, i, seam[i]);\n  }\n\n  return seam;\n}\n\nfunction cumulateWeights(\n  x: number,\n  ptr: number,\n  currentLineWeights: Int32Array,\n  previousLineWeights: Int32Array,\n  energies: Int16Array\n): void {\n  let weight = previousLineWeights[x];\n  let aboveXDelta = 0;\n  const weightLeft = previousLineWeights[x - 1];\n  if (weightLeft < weight) {\n    /*if (this.forwardEnergy) {\n      trace(\"weightLeft < weight\", 2, weightLeft, weight;\n    }*/\n    weight = weightLeft;\n    aboveXDelta = -1;\n  }\n  const weightRight = previousLineWeights[x + 1];\n  if (weightRight < weight) {\n    weight = weightRight;\n    aboveXDelta = 1;\n  }\n\n  //trace(\"blabla\", 2, ptr, this.backPtrWeights.length)\n  backPtrWeights[ptr] = aboveXDelta;\n  //trace(\"blabla 2\")\n  currentLineWeights[x] = energies[ptr] + weight;\n}\n","let redData = new Uint8Array(0);\nlet greenData = new Uint8Array(0);\nlet blueData = new Uint8Array(0);\n\nlet energies: Int16Array = new Int16Array(0);\n\nexport let latestSeam: Int32Array = new Int32Array(0);\n\nlet topPadding: number = 0;\n\nexport function initEnergyPicture(\n  pictureData: Uint8ClampedArray,\n  width: number,\n  height: number\n): void {\n  const dataWidth = width + 2;\n  topPadding = dataWidth;\n  const dataLength = dataWidth * (height + 2) + 8;\n\n  if (redData.length < dataLength) {\n    redData = new Uint8Array(dataLength);\n    greenData = new Uint8Array(dataLength);\n    blueData = new Uint8Array(dataLength);\n  }\n\n  const numberOfPixels = pictureData.length >> 2;\n\n  if (energies.length < numberOfPixels) {\n    energies = new Int16Array(numberOfPixels + 8);\n  }\n\n  let srcIndex: number = 0;\n  let colorIndex: number = dataWidth + 1;\n\n  //const start = Date.now();\n  for (let y: number = 0; y < height; y++) {\n    for (let x: number = 0; x < width; x++) {\n      redData[colorIndex] = pictureData[srcIndex];\n      greenData[colorIndex] = pictureData[srcIndex + 1];\n      blueData[colorIndex] = pictureData[srcIndex + 2];\n\n      srcIndex += 4;\n      colorIndex++;\n    }\n    colorIndex += 2;\n  }\n}\n\nexport function computeEnergies(\n  width: number,\n  height: number\n): Int16Array {\n  const dataWidth = width + 2;\n\n  let colorIndex: number = topPadding + 1;\n\n  const useLatestSeam = latestSeam.length === height;\n\n  let ptr = 0;\n  let ptrBeginLine = 0 - (width);\n\n  let colorIndexBeginLine = topPadding + 1 - dataWidth;\n\n  for (let y: number = 0; y < height; y++) {\n    ptrBeginLine = ptrBeginLine + (width);\n    ptr = ptrBeginLine;\n\n    colorIndexBeginLine += dataWidth;\n    colorIndex = colorIndexBeginLine;\n\n    let xMin: number = 0;\n    let xMax: number = width;\n    if (useLatestSeam) {\n      const sy = latestSeam[y];\n      xMin = Math.min(Math.max(0, sy - 2), width - 8);\n      xMax = Math.min(width, sy + 2);\n      colorIndex = colorIndexBeginLine + xMin;\n      ptr += xMin;\n    }\n\n    for (let x: number = xMin; x < xMax; x += 1, ptr += 1) {\n      const topOffset = colorIndex - dataWidth;\n      const belowOffset = colorIndex + dataWidth;\n      const leftOffset = colorIndex - 1;\n      const rightOffset = colorIndex + 1;\n\n      //trace('offset', 4, topOffset, rightOffset, belowOffset, leftOffset);\n\n      const energy = (\n        Math.abs(redData[topOffset] - redData[belowOffset]) +\n        Math.abs(redData[leftOffset] - redData[rightOffset]) +\n        Math.abs(greenData[topOffset] - greenData[belowOffset]) +\n        Math.abs(greenData[leftOffset] - greenData[rightOffset]) +\n        Math.abs(blueData[topOffset] - blueData[belowOffset]) +\n        Math.abs(blueData[leftOffset] - blueData[rightOffset]));\n\n        \n      energies[ptr] = energy;\n      colorIndex += 1;\n    }\n  }\n  //trace(\"ptr \" + ptr.toString( + \" \" + energiesPtr.toString() + \" \" + energies.length.toString());\n  return energies;\n}\n\nexport function removeSeamRGB(\n  seam: Int32Array,\n  width: number,\n  height: number\n): void {\n  //latestSeam = seam;\n\n  const oldHeight = height;\n  const oldWidth = width;\n  const newWidth = oldWidth - 1;\n  const oldPtrStep: number = (oldWidth + 2) * 1;\n  const newPtrStep: number = (newWidth + 2) * 1;\n  let oldPtr: number = topPadding;\n  let newPtr: number = oldPtr;\n  for (\n    let y = 0;\n    y < oldHeight;\n    y++, oldPtr += oldPtrStep, newPtr += newPtrStep\n  ) {\n    let sy = seam[y] + 1;\n    redData.copyWithin(newPtr, oldPtr, oldPtr + sy);\n    redData.copyWithin(newPtr + sy, oldPtr + sy + 1, oldPtr + oldPtrStep);\n    greenData.copyWithin(newPtr, oldPtr, oldPtr + sy);\n    greenData.copyWithin(newPtr + sy, oldPtr + sy + 1, oldPtr + oldPtrStep);\n    blueData.copyWithin(newPtr, oldPtr, oldPtr + sy);\n    blueData.copyWithin(newPtr + sy, oldPtr + sy + 1, oldPtr + oldPtrStep);\n  }\n\n  const oldEnergyPtrStep: number = oldWidth;\n  const newEnergyPtrStep: number = newWidth;\n  oldPtr = 0;\n  newPtr = 0;\n\n  for (\n    let y = 0;\n    y < oldHeight;\n    y++, oldPtr += oldEnergyPtrStep, newPtr += newEnergyPtrStep\n  ) {\n    let sy = seam[y];\n    energies.copyWithin(newPtr, oldPtr, oldPtr + sy);\n    energies.copyWithin(\n      newPtr + sy,\n      oldPtr + sy + 1,\n      oldPtr + oldEnergyPtrStep\n    );\n  }\n}\n","export function removeSeam(\n  seam: Int32Array,\n  pictureData: Uint8ClampedArray,\n  width: number,\n  height: number\n): Uint8ClampedArray {\n\n    const result = pictureData;\n    const oldHeight = Math.floor(height);\n    const oldWidth =  Math.floor(width);\n    const newWidth = oldWidth - 1;\n    const oldPtrStep = oldWidth * 4;\n    const newPtrStep = newWidth * 4;\n    let oldPtr = 0;\n    let newPtr = 0;\n    for (\n      let y = 0; y < oldHeight; y++, oldPtr += oldPtrStep, newPtr += newPtrStep\n    ) {\n      let sy = seam[y] * 4;\n      result.copyWithin(newPtr, oldPtr, oldPtr + sy);\n      result.copyWithin(\n        newPtr + sy,\n        oldPtr + sy + 4,\n        oldPtr + oldPtrStep\n      );\n    }\n    return result;\n}\n","import { Engine } from \"./seam-carving\";\nimport { findVerticalSeam } from \"./find-seam\";\nimport { computeEnergies, initEnergyPicture, removeSeamRGB } from \"./energy\";\nimport { removeSeam } from \"./remove-seam\";\n\nexport class RegularEngine implements Engine {\n\n  private imageData: Uint8ClampedArray = new Uint8ClampedArray(0);\n  private imageWidth: number = 0;\n  private imageHeight: number = 0;\n\n  private energies: Int16Array = new Int16Array(0);\n\n  init(data: Uint8ClampedArray, width: number): void {\n    this.imageData = data;\n    this.imageWidth = width;\n    this.imageHeight = data.length / 4 / width;\n    initEnergyPicture(data, this.imageWidth, this.imageHeight);\n  }\n  shrink(): Uint8ClampedArray {\n    const numberOfPixels = this.imageData.length / 4;\n\n    if (this.energies.length < numberOfPixels) {\n      this.energies = new Int16Array(numberOfPixels + 8);\n    }\n\n    for (let index = 0; index < 10; index++) {\n      \n    this.energies = computeEnergies(this.imageWidth, this.imageHeight);\n\n    //console.log({energies: this.energies})\n\n    const seam = findVerticalSeam(this.energies, this.imageWidth, this.imageHeight, numberOfPixels);\n\n    //log<string>(\"eng2 \" + seam[0].toString());\n\n    this.imageData = removeSeam(\n      seam,\n      this.imageData,\n      this.imageWidth,\n      this.imageHeight\n    );\n\n    removeSeamRGB(seam, this.imageWidth,\n      this.imageHeight);\n\n    \n    this.imageWidth--;\n    }\n\n    return this.imageData;\n  }\n\n\n\n  /*\n  @inline\n  private weightFrom(line: StaticArray<number>, x: i16, width: number): number {\n    if (x < 0 || x >= width) {\n      return i32.MAX_VALUE >> 1;\n    }\n    return unchecked(line[x]);\n  }*/\n\n\n}\n","import { RegularEngine } from \"./engine\";\n\n\nlet currentImageData: Uint8ClampedArray;\nlet currentWidth: number;\n\nexport interface Engine {\n  init(data: Uint8ClampedArray, width: number): void,\n  shrink(): Uint8ClampedArray\n}\n\n\nlet engine: Engine = new RegularEngine();\n\nexport function shrinkWidth(srcImage: Uint8ClampedArray, width: number) {\n  /*currentImageData = srcImage;\n  currentWidth = width;\n  Seam.create(currentImageData, currentWidth);*/\n  //return shrinkImage();\n\n  engine.init(srcImage, width);\n  return engine.shrink();\n}\nexport function shrinkWidthWithForwardEnergy(\n  srcImage: Uint8ClampedArray,\n  width: number\n) {\n  currentImageData = srcImage;\n  currentWidth = width;\n  Seam.createWithForwardEnergy(currentImageData, currentWidth);\n  //return shrinkImage();\n}\n\nexport function shrinkImage(): Uint8ClampedArray {\n  /*const seam = Seam.recycle(currentImageData, currentWidth);\n  currentImageData = seam.shrinkWidth();\n  currentWidth--;\n  return currentImageData;*/\n  return engine.shrink();\n}\n\nclass Color {\n   constructor(\n    private data: Uint8ClampedArray,\n    private ptr: number\n  ) {}\n\n  \n  get red(): number {\n    return this.data[this.ptr];\n  }\n\n  \n  get green(): number {\n    return this.data[this.ptr + 1];\n  }\n\n  \n  get blue(): number {\n    return this.data[this.ptr + 2];\n  }\n\n  \n  move(ptr: number): Color {\n    this.ptr = ptr;\n    return this;\n  }\n}\n\nconst whiteData = new Uint8ClampedArray(3);\nwhiteData[0] = 0xFF;\nwhiteData[1] = 0xFF;\nwhiteData[2] = 0xFF;\nconst WHITE = new Color(whiteData, 0);\n\n\nfunction delta(first: Color, second: Color) {\n  const deltaRed = first.red - second.red;\n  const deltaGreen = first.green - second.green;\n  const deltaBlue = first.blue - second.blue;\n\n  return deltaBlue * deltaBlue + deltaGreen * deltaGreen + deltaRed * deltaRed;\n}\n\nclass Picture {\n  northColor: Color;\n  southColor: Color;\n  westColor: Color;\n  eastColor: Color;\n  firstColor: Color;\n  secondColor: Color;\n\n  constructor(\n    public data: Uint8ClampedArray,\n    public width: number,\n    public height: number\n  ) {\n    this.northColor = new Color(data, 0);\n    this.southColor = new Color(data, 0);\n    this.westColor = new Color(data, 0);\n    this.eastColor = new Color(data, 0);\n    this.firstColor = new Color(data, 0);\n    this.secondColor = new Color(data, 0);\n  }\n\n  \n  toPtr(x: number, y: number): number {\n    return (x + y * this.width) << 2;\n  }\n\n  getColorAt(x: number, y: number): Color {\n    if (x < 0 || x >= this.width || y < 0 || y >= this.height) {\n      return WHITE;\n    }\n    return new Color(this.data, this.toPtr(x, y));\n  }\n\n  \n  isOut(x: number, y: number) {\n    return x < 0 || x >= this.width || y < 0 || y >= this.height;\n  }\n\n  \n  energyAt(x: number, y: number): number {\n    const northColor = this.isOut(x, y - 1)\n      ? WHITE\n      : this.northColor.move(this.toPtr(x, y - 1));\n    const southColor = this.isOut(x, y + 1)\n      ? WHITE\n      : this.southColor.move(this.toPtr(x, y + 1));\n    const westColor = this.isOut(x - 1, y)\n      ? WHITE\n      : this.westColor.move(this.toPtr(x - 1, y));\n    const eastColor = this.isOut(x + 1, y)\n      ? WHITE\n      : this.eastColor.move(this.toPtr(x + 1, y));\n\n    return delta(northColor, southColor) + delta(eastColor, westColor);\n  }\n\n  \n  energyDelta(x1: number, y1: number, x2: number, y2: number): number {\n    const firstColor = this.isOut(x1, y1)\n      ? WHITE\n      : this.firstColor.move(this.toPtr(x1, y1));\n    const secondColor = this.isOut(x2, y2)\n      ? WHITE\n      : this.secondColor.move(this.toPtr(x2, y2));\n\n    return delta(firstColor, secondColor);\n  }\n}\n\nclass Seam {\n  static instance: Seam;\n\n  picture: Picture;\n  energies: Float32Array;\n  backPtrWeights: Int8Array;\n  oddLineWeights: Float32Array;\n  evenLineWeights: Float32Array;\n  seam: number[];\n\n  public static create(data: Uint8ClampedArray, width: number): Seam {\n    Seam.instance = new Seam(data, width, false);\n    return Seam.instance;\n  }\n\n  public static createWithForwardEnergy(data: Uint8ClampedArray, width: number): Seam {\n    Seam.instance = new Seam(data, width, true);\n    return Seam.instance;\n  }\n\n  public static recycle(data: Uint8ClampedArray, width: number): Seam {\n    Seam.instance.init(data, width);\n    return Seam.instance;\n  }\n\n  constructor(\n    private data: Uint8ClampedArray,\n    private width: number,\n    private forwardEnergy: boolean\n  ) {\n    this.init(data, width);\n  }\n\n  private init(data: Uint8ClampedArray, width: number): void {\n    this.picture = new Picture(data, width, data.length / (width * 4));\n    if (this.forwardEnergy) {\n      this.backPtrWeights = new Int8Array(data.length >> 2);\n      this.oddLineWeights = new Float32Array(this.width);\n      this.evenLineWeights = new Float32Array(this.width);\n    } else {\n      this.initEnergies();\n    }\n  }\n\n  private initEnergies(): void {\n    let energies = this.energies;\n    const size = this.data.length >> 2;\n    if (!energies || energies.length < size) {\n      energies = new Float32Array(size);\n      this.backPtrWeights = new Int8Array(size);\n      this.oddLineWeights = new Float32Array(this.width);\n      this.evenLineWeights = new Float32Array(this.width);\n    }\n    const picture = this.picture;\n    for (let y: number = 0, w = 0, height = picture.height; y < height; y++) {\n      for (let x: number = 0, width = picture.width; x < width; x++, w++) {\n        energies[w] = picture.energyAt(x, y);\n      }\n    }\n\n    this.energies = energies;\n  }\n\n  \n  private weightFrom(line: Float32Array, x: number, width: number): number {\n    if (x < 0 || x >= width) {\n      return Number.MAX_VALUE;\n    }\n    return line[x];\n  }\n\n  \n  private cumulateWeights(\n    x: number,\n    ptr: number,\n    width: number,\n    currentLineWeights: Float32Array,\n    previousLineWeights: Float32Array\n  ): void {\n    let weight = this.weightFrom(previousLineWeights, x, width);\n    let aboveXDelta: number = 0;\n    const weightLeft = this.weightFrom(previousLineWeights, x - 1, width);\n    if (weightLeft < weight) {\n      weight = weightLeft;\n      aboveXDelta = -1;\n    }\n    const weightRight = this.weightFrom(previousLineWeights, x + 1, width);\n    if (weightRight < weight) {\n      weight = weightRight;\n      aboveXDelta = 1;\n    }\n\n    this.backPtrWeights[ptr] = aboveXDelta;\n    currentLineWeights[x] = this.energies[ptr] + weight;\n  }\n\n  private findVerticalSeamWithoutForwardEnergy(): number[] {\n    const picture = this.picture;\n    const height = Math.floor(picture.height);\n    const width = Math.floor(picture.width);\n    let weightIndex = width;\n    let previousLineWeights = this.evenLineWeights;\n    let currentLineWeights = this.oddLineWeights;\n    previousLineWeights.set(this.energies.subarray(0, width));\n    for (let j: number = 1; j < height; j++) {\n      for (let i: number = 0; i < width; i++, weightIndex++) {\n        this.cumulateWeights(\n          i,\n          weightIndex,\n          width,\n          currentLineWeights,\n          previousLineWeights\n        );\n      }\n      let swapTmp = currentLineWeights;\n      currentLineWeights = previousLineWeights;\n      previousLineWeights = swapTmp;\n    }\n\n    // find index of last seam pixel\n    let lastIndex = 0;\n    let lastIndexWeight = Number.MAX_VALUE;\n\n    for (let i: number = 0; i < width; i++) {\n      let weight = currentLineWeights[i];\n      if (weight < lastIndexWeight) {\n        lastIndex = i;\n        lastIndexWeight = weight;\n      }\n    }\n\n    const weights = this.backPtrWeights;\n    const seam = new Array(height);\n    seam[height - 1] = lastIndex;\n    for (let i = height - 2; i + 1 > 0; i--) {\n      let next = seam[i + 1];\n      let w = next + weights[next + (i + 1) * width];\n      seam[i] = w;\n    }\n\n    return seam;\n  }\n\n  //\n  private cumulateWeightsWithForwardEnergy(\n    x: number,\n    y: number,\n    ptr: number,\n    currentLineWeights: Float32Array,\n    previousLineWeights: Float32Array\n  ): void {\n    //trace(\"cumulateWeightsWithForwardEnergy\", 1, x);\n    //trace(\"cumulateWeightsWithForwardEnergy\", 1, y);\n    const picture = this.picture;\n    const width = picture.width;\n    const costCenter = picture.energyDelta(x - 1, y, x + 1, y);\n    const costLeft = costCenter + picture.energyDelta(x, y - 1, x - 1, y);\n    const costRight = costCenter + picture.energyDelta(x, y - 1, x + 1, y);\n    //trace(\"energyDelta\", 1, costLeft);\n\n    let weight = this.weightFrom(previousLineWeights, x, width) + costCenter;\n    let aboveXDelta: number = 0;\n    const weightLeft = this.weightFrom(previousLineWeights, x - 1, width) + costLeft;\n    if (weightLeft < weight) {\n      weight = weightLeft;\n      aboveXDelta = -1;\n    }\n    //trace(\"energyDelta left\", 1, costLeft);\n    const weightRight = this.weightFrom(previousLineWeights, x + 1, width) + costRight;\n    if (weightRight < weight) {\n      weight = weightRight;\n      aboveXDelta = 1;\n    }\n    //trace(\"energyDelta right\", 1, costLeft);\n\n    this.backPtrWeights[ptr] = aboveXDelta;\n    //trace(\"backPtrWeights\", 1, costLeft);\n\n    currentLineWeights[x] = weight;\n  }\n\n  private findVerticalSeamWithForwardEnergy(): number[] {\n    const picture = this.picture;\n    const height = Math.floor(picture.height);\n    const width = Math.floor(picture.width);\n    let weightIndex = width;\n    this.evenLineWeights.fill(0);\n    let previousLineWeights = this.evenLineWeights;\n    let currentLineWeights = this.oddLineWeights;\n    for (let j: number = 1; j < height; j++) {\n      for (let i: number = 0; i < width; i++, weightIndex++) {\n        //trace(\"i j\", 1, j);\n        this.cumulateWeightsWithForwardEnergy(\n          i,\n          j,\n          weightIndex,\n          currentLineWeights,\n          previousLineWeights\n        );\n      }\n      let swapTmp = currentLineWeights;\n      currentLineWeights = previousLineWeights;\n      previousLineWeights = swapTmp;\n    }\n\n    // find index of last seam pixel\n    let lastIndex = 0;\n    let lastIndexWeight = Number.MAX_VALUE;\n\n    for (let i: number = 0; i < width; i++) {\n      let weight = currentLineWeights[i];\n      if (weight < lastIndexWeight) {\n        lastIndex = i;\n        lastIndexWeight = weight;\n      }\n    }\n\n    const weights = this.backPtrWeights;\n    const seam = new Array<number>(height);\n    seam[height - 1] = lastIndex;\n    for (let i: number = height - 2; i + 1 > 0; i--) {\n      let next = seam[i + 1];\n      let w = next + weights[next + (i + 1) * width];\n      seam[i] = w;\n    }\n\n    return seam;\n  }\n\n  private findVerticalSeam(): number[] {\n    if (this.forwardEnergy) {\n      return this.findVerticalSeamWithForwardEnergy();\n    }\n    return this.findVerticalSeamWithoutForwardEnergy();\n  }\n\n  shrinkWidth(): Uint8ClampedArray {\n    const seam = this.findVerticalSeam();\n    this.seam = seam;\n    const picture = this.picture;\n    const result = picture.data;\n    const oldHeight = Math.floor(picture.height);\n    const oldWidth = Math.floor(picture.width);\n    const newWidth = oldWidth - 1;\n    const oldPtrStep = oldWidth * 4;\n    const newPtrStep = newWidth * 4;\n    let oldPtr: number = 0;\n    let newPtr: number = 0;\n    for (\n      let y: number = 0; y < oldHeight; y++, oldPtr += oldPtrStep, newPtr += newPtrStep\n    ) {\n      let sy: number = seam[y] * 4;\n      result.copyWithin(newPtr, oldPtr, oldPtr + sy);\n      result.copyWithin(\n        newPtr + sy,\n        oldPtr + sy + (1 << 2),\n        oldPtr + oldPtrStep\n      );\n    }\n    return result;\n  }\n}\n","import { shrinkImage, shrinkWidth } from \"./seam-carving\";\n\n//\n// OffscreenCanvas polyfill\n// https://gist.github.com/n1ru4l/9c7eff52fe084d67ff15ae6b0af5f171\n//\nif (!window.OffscreenCanvas) {\n  (window as any).OffscreenCanvas = class OffscreenCanvas {\n    canvas: any;\n    constructor(width: number, height: number) {\n      this.canvas = document.createElement(\"canvas\");\n      this.canvas.width = width;\n      this.canvas.height = height;\n      this.canvas.convertToBlob = () => new Promise((resolve) => { this.canvas.toBlob(resolve) });\n      return this.canvas;\n    }\n  };\n}\n\n\nconst dataUrl2ImageData = (url: string): Promise<ImageData> =>\n  new Promise((resolve) => {\n    const newimage = new Image();\n    newimage.src = url;\n    newimage.onload = () => {\n      const canvas = new OffscreenCanvas(newimage.width, newimage.height);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(newimage, 0, 0);\n      resolve(ctx.getImageData(0, 0, newimage.width, newimage.height));\n    };\n  });\n\nconst loadImage = (file: any): Promise<ImageData> =>\n  new Promise((resolve) => {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      const imageData = dataUrl2ImageData((event.currentTarget as any).result);\n      resolve(imageData);\n    };\n    reader.readAsDataURL(file);\n  });\n\nlet nextFrame: number | void = undefined;\n\nconst displayResultImage = (\n  imageData: ImageData,\n  wasmMemoryArray: Uint8ClampedArray\n) => {\n  const resultCanvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  const width = imageData.width - 10;\n  const height = imageData.height;\n  resultCanvas.width = width;\n  resultCanvas.height = height;\n  const resultCtx = resultCanvas.getContext(\"2d\");\n  const resultImageData = resultCtx.createImageData(width, height);\n  resultImageData.data.set(wasmMemoryArray.subarray(0, width * height * 4));\n  resultCtx.putImageData(resultImageData, 0, 0);\n  return resultImageData;\n};\n\nconst shrinkByHalf = (imageData: ImageData) => {\n  if (nextFrame) {\n    cancelAnimationFrame(nextFrame);\n  }\n\n  const originalWidth = imageData.width;\n\n  /*const ptrArr = wasm.__retain(\n    wasm.__allocArray(wasm.UINT8ARRAY_ID, imageData.data)\n  );\n  const resultPtr = fwdEnergy\n    ? wasm.shrinkWidthWithForwardEnergy(ptrArr, originalWidth)\n    : wasm.shrinkWidth(ptrArr, originalWidth);\n  const resultArray = wasm.__getUint8Array(resultPtr);\n  imageData = displayResultImage(imageData, resultArray);\n  wasm.__release(ptrArr);\n  wasm.__release(resultPtr);*/\n  var dataCopy = new Uint8ClampedArray(imageData.data);\n  /*const result = fwdEnergy\n  ? shrinkWidthWithForwardEnergy(dataCopy, originalWidth)\n  : shrinkWidth(dataCopy, originalWidth);*/\n  const result = shrinkWidth(dataCopy, originalWidth);\n\n  imageData = displayResultImage(imageData, result);\n\n  let frameDelta = 0;\n  const canvasCaption = document.getElementById(\"canvasCaption\");\n\n  const start = Date.now();\n  const shrink = (n: number) => {\n    const shrinkOneSeam = () => {\n      const result = shrinkImage();\n      imageData = displayResultImage(imageData, result);\n      frameDelta += 10;\n      const processingTime = Date.now() - start;\n      canvasCaption.innerHTML = `Width reduced by ${frameDelta}px after ${processingTime}ms`;\n      if (frameDelta < n) {\n        nextFrame = requestAnimationFrame(shrinkOneSeam);\n      }\n    };\n    nextFrame = requestAnimationFrame(shrinkOneSeam);\n  };\n\n  shrink(originalWidth / 2);\n};\n/*\nconst run = async () => {\n  await new Promise((resolve) => window.addEventListener(\"load\", resolve));\n\n\n  let imageData: ImageData;\n  let fwdEnergyFlag = false;\n\n  fetch(\"surfer-web.jpg\")\n    .then((response) => response.arrayBuffer())\n    .then((buffer) => {\n      const arrayBufferView = new Uint8Array(buffer);\n      const blob = new Blob([arrayBufferView], { type: \"image/jpeg\" });\n      const urlCreator = window.URL || window.webkitURL;\n      const imageUrl = urlCreator.createObjectURL(blob);\n      return dataUrl2ImageData(imageUrl);\n    })\n    .then((data) => {\n      imageData = data;\n      shrinkByHalf(imageData, fwdEnergyFlag);\n    });\n\n  document\n    .getElementById(\"originalFile\")\n    .addEventListener(\"change\", async (evt) => {\n      const files = (evt.target as any).files;\n\n      imageData = await loadImage(files[0]);\n      shrinkByHalf(imageData, fwdEnergyFlag);\n    });\n\n  document\n    .getElementById(\"algo-classic\")\n    .addEventListener(\"click\", () => {\n      fwdEnergyFlag = false;\n      shrinkByHalf(imageData, fwdEnergyFlag);\n    });\n  document.getElementById(\"algo-fwd\").addEventListener(\"click\", () => {\n    fwdEnergyFlag = true;\n    shrinkByHalf(imageData, fwdEnergyFlag);\n  });\n};\nrun();*/\nexport const jsShrinkByHalf = shrinkByHalf;\n","import loader from \"@assemblyscript/loader\";\nimport { jsShrinkByHalf } from './index.js';\n\n//\n// OffscreenCanvas polyfill\n// https://gist.github.com/n1ru4l/9c7eff52fe084d67ff15ae6b0af5f171\n//\nif (!window.OffscreenCanvas) {\n  (window as any).OffscreenCanvas = class OffscreenCanvas {\n    canvas: any;\n    constructor(width: number, height: number) {\n      this.canvas = document.createElement(\"canvas\");\n      this.canvas.width = width;\n      this.canvas.height = height;\n      this.canvas.convertToBlob = () => new Promise((resolve) => { this.canvas.toBlob(resolve) });\n      return this.canvas;\n    }\n  };\n}\n\nconst initWasm = async () => await loader.instantiate(fetch(\"optimized.wasm\"));\n\nconst dataUrl2ImageData = (url: string): Promise<ImageData> =>\n  new Promise((resolve) => {\n    const newimage = new Image();\n    newimage.src = url;\n    newimage.onload = () => {\n      const canvas = new OffscreenCanvas(newimage.width, newimage.height);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(newimage, 0, 0);\n      resolve(ctx.getImageData(0, 0, newimage.width, newimage.height));\n    };\n  });\n\nconst loadImage = (file: any): Promise<ImageData> =>\n  new Promise((resolve) => {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      const imageData = dataUrl2ImageData((event.currentTarget as any).result);\n      resolve(imageData);\n    };\n    reader.readAsDataURL(file);\n  });\n\nlet nextFrame: number | void = undefined;\n\nconst displayResultImage = (\n  imageData: ImageData,\n  wasmMemoryArray: Uint8Array\n) => {\n  const resultCanvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  const width = imageData.width - 10;\n  const height = imageData.height;\n  resultCanvas.width = width;\n  resultCanvas.height = height;\n  const resultCtx = resultCanvas.getContext(\"2d\");\n  const resultImageData = resultCtx.createImageData(width, height);\n  resultImageData.data.set(wasmMemoryArray.subarray(0, width * height * 4));\n  resultCtx.putImageData(resultImageData, 0, 0);\n  return resultImageData;\n};\n\nconst asShrinkByHalf = (imageData: ImageData, wasm: any, useSimd: boolean) => {\n  if (nextFrame) {\n    cancelAnimationFrame(nextFrame);\n  }\n\n  const originalWidth = imageData.width;\n\n  const { __pin, __unpin, __newArray, __getArray, __getArrayView, __getUint8ArrayView, UINT8ARRAY_ID, shrinkWidthWithForwardEnergy, shrinkWidth } = wasm.exports\n\n  const ptrArr = __pin(\n    __newArray(UINT8ARRAY_ID, imageData.data)\n  );\n\n  const resultPtr = useSimd\n    ? shrinkWidth(ptrArr, originalWidth, true)\n    : shrinkWidth(ptrArr, originalWidth, false);\n  const resultArray = __getUint8ArrayView(resultPtr);\n  imageData = displayResultImage(imageData, resultArray);\n  __unpin(ptrArr);\n  //__unpin(resultPtr);\n\n  let frameDelta = 0;\n  const canvasCaption = document.getElementById(\"canvasCaption\");\n  const start = Date.now();\n\n  const shrink = (n: number) => {\n    const shrinkOneSeam = () => {\n      const resultPtr = wasm.exports.shrink();\n      const resultArray = __getUint8ArrayView(resultPtr);\n      imageData = displayResultImage(imageData, resultArray);\n      //__unpin(resultPtr);\n      frameDelta += 10;\n      const processingTime = Date.now() - start;\n      canvasCaption.innerHTML = `Width reduced by ${frameDelta}px after ${processingTime}ms`;\n      if (frameDelta < n) {\n        nextFrame = requestAnimationFrame(shrinkOneSeam);\n      } \n    };\n    nextFrame = requestAnimationFrame(shrinkOneSeam);\n  };\n\n  shrink(originalWidth / 2);\n};\n\nconst run = async () => {\n  await new Promise((resolve) => window.addEventListener(\"load\", resolve));\n\n  const wasm = (await initWasm()) as any;\n  console.log(wasm)\n\n  let imageData: ImageData;\n  let useWasmFlag = false;\n  let useSimdFlag = false;\n\n  const shrinkByHalf = (imageData: ImageData) => {\n    if (useWasmFlag) {\n      asShrinkByHalf(imageData, wasm, useSimdFlag);\n    } else {\n      jsShrinkByHalf(imageData);\n    }\n  }\n\n  fetch(\"surfer-web.jpg\")\n    .then((response) => response.arrayBuffer())\n    .then((buffer) => {\n      const arrayBufferView = new Uint8Array(buffer);\n      const blob = new Blob([arrayBufferView], { type: \"image/jpeg\" });\n      const urlCreator = window.URL || window.webkitURL;\n      const imageUrl = urlCreator.createObjectURL(blob);\n      return dataUrl2ImageData(imageUrl);\n    })\n    .then((data) => {\n      imageData = data;\n      shrinkByHalf(imageData);\n    });\n\n  document\n    .getElementById(\"originalFile\")\n    .addEventListener(\"change\", async (evt) => {\n      const files = (evt.target as any).files;\n\n      imageData = await loadImage(files[0]);\n      shrinkByHalf(imageData);\n    });\n\n  document\n    .getElementById(\"implem-js\")\n    .addEventListener(\"click\", () => {\n      useWasmFlag = false;\n      useSimdFlag = false;\n      shrinkByHalf(imageData);\n    });\n  document\n    .getElementById(\"implem-as\")\n    .addEventListener(\"click\", () => {\n      useWasmFlag = true;\n      useSimdFlag = false;\n      shrinkByHalf(imageData);\n    });\n  document.getElementById(\"implem-as-simd\").addEventListener(\"click\", () => {\n    useWasmFlag = true;\n    useSimdFlag = true;\n    shrinkByHalf(imageData);\n  });\n};\nrun();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}